{"version":3,"sources":["webpack:///./src/app/load-app/load-app.component.ts","webpack:///./src/app/load-app/load-app.component.html","webpack:///./src/app/load-app/load-app.module.ts","webpack:///./src/app/load-app/shared/load-app.service.ts"],"names":[],"mappings":"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","file":"load-app-load-app-module-es5.js","sourcesContent":["import { Component, OnInit, InjectionToken } from '@angular/core';\nimport { AppService } from '../app.service';\nimport { LoadAppService } from './shared/load-app.service';\nimport { Router } from '@angular/router';\ndeclare const APP_EVENT_BUS;\n\n@Component({\n  selector: 'app-load-app',\n  templateUrl: './load-app.component.html'\n})\nexport class LoadAppComponent implements OnInit {\n\n\n\n  constructor(\n    public appService: AppService, \n    private loadAppService: LoadAppService,\n    private router:Router ) { }\n\n  ngOnInit() \n  {\n    this.loadAppService.loadApp(this.appService.menuItemSelected);\n    this.listenerGoHome();\n  }\n\n\n  public listenerGoHome()\n  {\n    APP_EVENT_BUS.subscribe(\"go-home\", go =>\n    {\n      console.log(\"go home >>>>>\"); \n      this.loadAppService.unloadApp();\n      this.router.navigate(['/home']);\n    })\n  }\n}\n","<div id=\"{{appService.idContainer}}\"></div>\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { LoadAppComponent } from './load-app.component';\nimport { RouterModule } from '@angular/router';\nimport { LoadAppService } from './shared/load-app.service';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    RouterModule.forChild([\n      {\n        path : '',\n        component : LoadAppComponent\n      }\n    ])\n  ],\n  declarations: [LoadAppComponent],\n  providers: [LoadAppService]\n})\nexport class LoadAppModule { }\n","import { Injectable, Inject } from '@angular/core';\nimport { MenuItem } from 'src/app/components/menu/shared/menu-item.model';\nimport { DOCUMENT } from '@angular/common';\nimport { AppService } from 'src/app/app.service';\nimport { HttpClient } from '@angular/common/http';\nimport { Observable } from 'rxjs';\nimport { environment } from '../../../environments/environment';\n\ndeclare const APP_EVENT_BUS;\n\n@Injectable()\nexport class LoadAppService {\n\n    constructor(\n        @Inject(DOCUMENT) private document: Document,\n        private appService: AppService,\n        private httpClient: HttpClient) { }\n\n    private configAppCurrent:any;\n    /**\n     * Inclui a nova app a ser rederizada na pagina.\n     * \n     * @param itemMenu \n     */     \n    public loadApp(itemMenu: MenuItem) {\n        if (itemMenu)\n        {\n            this.findConfigApp(itemMenu.pathApp)\n                .subscribe(configApp => {\n                    this.configAppCurrent = configApp;\n                    this.loadTag(itemMenu.tag);\n                    this.loadScriptsShared();\n                    this.loadScripts(configApp.tagName, itemMenu.pathApp, configApp.scripts);\n                })\n\n        }\n    }\n\n     /**\n      * Inclui a tag do custom element da funcionalidade dentro da div container da\n      * página.\n      * \n      * @param tag \n      */\n     private loadTag(tag:string)\n     {\n        if(tag)\n        {\n            const idContainer = this.appService.idContainer;\n            const container = this.document.getElementById(idContainer);\n            container.innerHTML = tag;\n        }\n     }\n\n\n    /**\n     * Verifica se a tag que envolve os scripts já esta no DOM,\n     * caso não esteja cria uma tag span e inclui as tags scripts\n     * e adiciona ao header da pagina.\n     * \n     * @param scripts \n     */\n    private loadScripts(tagName: string, pathApp:string, scripts: Array<string>) \n    {\n    \n        if (scripts && scripts.length)\n        {\n            const idSpanContainerScript = \"id\" + tagName;\n\n            const spanContainerLoaderd = this.document.getElementById(idSpanContainerScript);\n\n            if (!spanContainerLoaderd)\n            {\n                const spanContainerScript = this.document.createElement(\"span\");\n\n                for (const script of scripts)\n                {\n                    spanContainerScript.id = \"id\" + tagName;\n\n                    const elementScript = this.document.createElement(\"script\");\n\n                    elementScript.src = environment.serverStatic + pathApp + \"/\" + script;\n                    //elementScript.src =  script;\n                    spanContainerScript.appendChild(elementScript);\n                }\n\n                /**\n                 * TODO - INCLUIR NO HEAD NÃO É LEGAL, COLOCAR NO BODY\n                 */\n                const header = this.document.getElementsByTagName(\"head\")[0];\n                header.appendChild(spanContainerScript);\n\n            }\n        }\n    }\n\n    private loadScriptsShared() \n    {\n    \n        const idSpanSharedScript = \"idSharedScript\";\n        const spanContainerLoaderd = this.document.getElementById(idSpanSharedScript);\n\n        if (!spanContainerLoaderd)\n        {\n            const elementScript = this.document.createElement(\"script\");\n            elementScript.src = \"https://cdnjs.cloudflare.com/ajax/libs/zone.js/0.9.1/zone.min.js\";\n\n            const spanSharedScript = this.document.createElement(\"span\");\n            spanSharedScript.id = idSpanSharedScript;\n            spanSharedScript.appendChild(elementScript);\n\n            const header = this.document.getElementsByTagName(\"head\")[0];\n            header.appendChild(spanSharedScript);\n        }\n\n    }\n\n    /**\n     * Busca as configurações da app a ser carregada.\n     * \n     * \n     * @param pathApp \n     */\n    private findConfigApp(pathApp: string): Observable<any> \n    {\n        //return this.httpClient.get(\"/config-app.json\");\n        return this.httpClient.get(environment.serverStatic +  pathApp + \"/config-app.json\");\n    }\n\n\n    private addlistener() \n    {\n        const appSeguros = this.document.getElementsByTagName(\"app-seguros\")[0];\n\n        appSeguros.addEventListener('emitTypeSeguro', event => {\n            console.log(event);\n        })\n    }\n\n\n    public unloadApp()\n    {\n        const elementApp = this.document.getElementsByTagName(this.configAppCurrent.tagName);\n\n        if(elementApp && elementApp.length)\n        {\n            elementApp[0].remove();\n        }\n       \n    }\n}"],"sourceRoot":""}